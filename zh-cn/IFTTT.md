!>  **当前版本**：[uws场景引擎服务v3.1.4]()    
 **更新时间**：{docsify-updated} 

## 简介
>为家庭添加场景模板，支持应用开发场景模板，并为应用用户提供场景模板，用户可以基于场景模板添加设备，让设备支持家庭下的场景调用；

![场景引擎图片][IFTTT_type]

## 名词解释



## 功能介绍
1、设备间场景调用，设备状态变化触发其他设备执行相关命令；</br>
2、设备状态告警推送，设备状态定义为特定值后给APP用户推送相关定义的告警信息；</br>
3、设备解绑消息，设备必须被拥有者分享到家庭，并且绑定了有效场景，则无论场景是否开启，一旦解绑设备都会推出设备取消分享家庭的消息并含带场景信息；</br>
4、设备取消分享家庭，如果设备已经绑定了有效场景，无论场景是否开启，一旦设备从家庭退出都会推出设备取消分享家庭的消息并含带场景信息；</br>
5、删除家庭成员，删除的家庭成员如果之前绑定了设备，并且已经将绑定的设备分享到家庭中，而且根据这些设备创建了场景，则无论场景是否开启，一旦家庭成员被删除都会推出删除家庭成员的消息并含带场景信息；</br>
6、用户退出家庭操作，退出家庭的用户如果之前绑定了设备，并且已经将绑定的设备分享到家庭中，而且根据这些设备创建了场景，则无论场景是否开启，一旦用户退出家庭都会推出用户退出家庭的消息并含带场景信息；</br>
7、删除家庭操作，根据家庭必须有可用的场景信息，一旦家庭被删除都会推出删除家庭的消息，并含带场景信息；</br>

## 公共结构  

### SceneDto  
向前兼容场景对象，不能再改。   
  
| **名称** | 场景对象 |&emsp;| SceneDto |   
| ------------- |:----------:|:-----:|:--------:|
|**字段名**|**类型**|**说明**|**备注**|  
|Id| String |场景Id唯一 |不填；UUID|  
|sourceId| String | 场景来源ID |选填；用户自建场景忽略|  
|basisSceneId| String | 基础场景Id |基础场景Id+基础版本号来区分是否需要升级|    
|sceneName| String | 场景名称(应用场景名称) |必填；最大长度255| 
|appSceneAlias| String | 应用场景别名 |选填；最大长度255 用户自建场景忽略| 
|basicSceneAlias| String | 公共场景别名 |选填；最大长度255 用户自建场景忽略| 
|sceneDesc| String | 场景描述 |必填；最大长度600| 
|userId| String | 用户ID |必填；最大长度32| 
|familyId| String | 家庭ID |选填；| 
|type| String| 场景类型|必填；最大长度32 用户自建场景忽略| 
|rules| RuleTemplateDto[] | 规则模板 |必填；可以是多个规则片段组成场景整体规则；一个场景最多支持10个片段；每个片段最多支持25个条件的运算；| 
|auto| boolean | 是否支持自动实例化 |必填；默认为false 用户自建场景忽略 | 
|canAppTrigger| boolean | 是否支持App手动触发执行 |选填，默认是不支持 0:开启后自动执行  1：一键离家| 
|status| String | 基础场景当前状态 |选填；目前只关注三个状态，默认不填为草稿：draft；已发布：publish;已删除:deleted；用户不关注（场景测试app可以根据该字段显示场景模板开发状态）| 
|appId| String | appId |应用标识| 

## 接口清单




## 使用方式

## 开通流程

![开通流程][IFTTT_liucheng]


## 应用场景
本服务适用于家庭组下的场景应用
应用接入场景引擎API，并且配合使用消息推送SDK（消息推送类场景需APP内置SDK）
**自定义模板方式：** 海极网—开通场景引擎功能—场景开发portal定义场景模板—提交审核模板—海极网运营审核通过场景模板—在海极网为APP订阅场景模板—APP集成API开发—上线发布使用；
**使用现成模板方式：** 海极网—开通场景引擎功能—选取已发布上线的场景模板—APP集成API开发—上线发布使用；



## 常见问题



[^-^]:常用图片注释
[IFTTT_type]:_media/_IFTTT/IFTTT_type.png
[IFTTT_liucheng]:_media/_IFTTT/IFTTT_liucheng.png


